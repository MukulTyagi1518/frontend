---
title: "Google-Cognito Integration"
description: "Implement Google Sign-In using Amazon Cognito & Next.js without Hosted UI or client-side AWS Amplify authentication"
---

# Google Sign-In with Amazon Cognito

This guide will walk you through implementing Google Sign-In using Amazon Cognito and Next.js, without relying on Hosted UI or client-side authentication with AWS Amplify.

## OAuth 2.0 Flow Overview

<Accordion title="Understanding the OAuth 2.0 Flow">
  The OAuth 2.0 flow for Google Sign-In with Amazon Cognito involves:

  1. User authentication
  2. User consent
  3. Google authorization server
  4. Exchanging authorization code with Cognito
  5. Accessing Cognito-protected resources
</Accordion>

## Setup Process

<Steps>
  <Step title="Setting Up Amazon Cognito User Pool">
    <AccordionGroup>
      <Accordion title="Create and Configure User Pool">
        1. Navigate to the Amazon Cognito Console.  
        2. Create a user pool.  
        3. Configure sign-in experience with federated identity providers, including Google.  
        4. Set security requirements, multi-factor authentication, and account recovery options.  
        5. Configure sign-up experience and message delivery.  
      </Accordion>
      <Accordion title="Integrate Your App">
        1. Integrate your app with a user pool.  
        2. Generate an app client with a client secret.  
        3. Define callback URLs.  
      </Accordion>
    </AccordionGroup>
  </Step>

  <Step title="Registering Your Application with Google">
    <AccordionGroup>
      <Accordion title="Google Cloud Platform Setup">
        1. Sign in to the Google Cloud Platform Console.  
        2. Create a new project.  
        3. Configure OAuth consent screen details.  
        4. Define app information, authorized domains, scopes, and test users.  
      </Accordion>
      <Accordion title="Create OAuth Credentials">
        1. Create OAuth client credentials with web application type.  
        2. Set authorized JavaScript origins and redirect URIs.  
      </Accordion>
    </AccordionGroup>
  </Step>

  <Step title="Adding Google as Identity Provider to Cognito User Pool">
    <AccordionGroup>
      <Accordion title="Configure Google as Identity Provider">
        1. Navigate to the user pool in the Amazon Cognito console.  
        2. Add Google as an identity provider.  
        3. Provide client ID, client secret, and authorized scopes.  
        4. Map attributes between Google and the user pool.  
      </Accordion>
      <Accordion title="Configure App Client Settings">
        1. Configure the app client settings to use Google as an identity provider.  
        2. Ensure necessary OpenID Connect scopes are selected.  
      </Accordion>
    </AccordionGroup>
  </Step>

  <Step title="Signing In With Google">
    1. Obtain Cognito domain, app client ID, and app client secret from the Cognito console.  
    2. Use these values as environment variables in your Next.js application for Google Sign-In integration.  
  </Step>
</Steps>

## Frontend Integration with Next.js

### Environment Setup

Create a `.env.local` file in your Next.js project root with the following content:

```env
COGNITO_DOMAIN=<your-cognito-domain>
APP_CLIENT_ID=<your-app-client-id>
APP_CLIENT_SECRET=<your-app-client-secret>
